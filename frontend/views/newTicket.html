<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="UTF-8" />
        <title>Crear Nuevo Ticket</title>
        <link rel="stylesheet" href="../Css/newTicket.css" />
        <script src="https://unpkg.com/lucide@latest"></script>
    </head>
    <body>
        <button class="open-modal-btn" onclick="openModal()">
            <i data-lucide="plus"></i>Nuevo Ticket
        </button>

        <!-- Modal -->
        <div class="modal-overlay" id="modalOverlay">
            <div class="modal">
                <h2>Crear Nuevo Ticket</h2>
                <p>
                    Completa el formulario para crear un nuevo ticket de
                    soporte.
                </p>

                <form id="ticketForm">
                    <div class="form-group">
                        <label for="title">Título</label>
                        <input
                            id="title"
                            type="text"
                            placeholder="Describe brevemente el problema"
                            required
                        />
                    </div>

                    <div class="form-group">
                        <label for="description">Descripción</label>
                        <textarea
                            id="description"
                            rows="4"
                            placeholder="Proporciona más detalles sobre el problema"
                            required
                        ></textarea>
                    </div>

                    <div class="two-columns">
                        <div class="form-group">
                            <label for="priority">Prioridad</label>
                            <select id="priority" required>
                                <option value="" disabled selected>
                                    Selecciona prioridad
                                </option>
                                <option value="low">Baja</option>
                                <option value="medium">Media</option>
                                <option value="high">Alta</option>
                                <option value="urgent">Urgente</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="category">Categoría</label>
                            <select id="category" required>
                                <option value="" disabled selected>
                                    Selecciona categoría
                                </option>
                                <option value="technical">Técnico</option>
                                <option value="billing">Facturación</option>
                                <option value="general">General</option>
                                <option value="feature">
                                    Nueva Funcionalidad
                                </option>
                            </select>
                        </div>
                    </div>

                    <div class="modal-footer">
                        <button
                            type="button"
                            class="btn btn-cancel"
                            onclick="closeModal()"
                        >
                            Cancelar
                        </button>
                        <button type="submit" class="btn btn-submit">
                            Crear Ticket
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <script>
            function openModal() {
                document.getElementById("modalOverlay").style.display = "flex";
            }

            function closeModal() {
                document.getElementById("modalOverlay").style.display = "none";
            }

            document
                .getElementById("ticketForm")
                .addEventListener("submit", function (e) {
                    e.preventDefault();

                    const data = {
                        title: document.getElementById("title").value,
                        description:
                            document.getElementById("description").value,
                        priority: document.getElementById("priority").value,
                        category: document.getElementById("category").value,
                    };

                    console.log("Creando ticket:", data);

                    this.reset();
                    closeModal();
                });
        </script>
        <script>
            lucide.createIcons();
        </script>
    </body>
</html>
